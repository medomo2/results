import streamlit as st
import pandas as pd

# 1. ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ
st.set_page_config(page_title="ูุชูุฌุฉ ุงูุทูุงุจ", page_icon="๐", layout="centered")

# 2. ุงูุนููุงู
st.title("๐ ูุธุงู ุงูุงุณุชุนูุงู ุนู ุงููุชูุฌุฉ")
st.write("ุฃุฏุฎู ุงูุฑูู ุงููููู ุนุดุงู ุชุธูุฑ ูุชูุฌุชู")

# 3. ููุงู ูุฑูุน ุงูููู (ูููุฏุฑุณ ููุท - ูููู ุฅุฎูุงุคู ูุงุญูุงู)
# ูู ุงููุณุฎุฉ ุงูููุงุฆูุฉุ ุงูููู ุจูููู ูุฑููุน ุฌุงูุฒ ูุด ูู ูุฑุฉ ุชุฑูุนู
uploaded_file = st.file_uploader("ูููุณุคูู: ุงุฑูุน ููู ุงููุชูุฌุฉ (Excel)", type=['xlsx'])

if uploaded_file is not None:
    # ูุฑุงุกุฉ ููู ุงูุฅูุณู
    try:
        df = pd.read_excel(uploaded_file)
        
        # ุงูุชุฃูุฏ ูู ุฃู ุงูุฃุนูุฏุฉ ุฑูููุฉ (ุนุดุงู ุงูุจุญุซ ูุดุชุบู ุตุญ)
        # ุงูุชุฑุถูุง ุฃู ุงุณู ุงูุนููุฏ ูู ุงูุฅูุณู ูู "National_ID"
        # ูุงุฒู ุชุบูุฑ ุงูุงุณู ููุง ุญุณุจ ุงููู ููุชูุจ ูู ูููู
        
        # 4. ุฎุงูุฉ ุงูุจุญุซ
        national_id_input = st.text_input("โ๏ธ ุงูุชุจ ุงูุฑูู ุงููููู ููุง", max_chars=14)

        if st.button("ุจุญุซ ุนู ุงููุชูุฌุฉ"):
            if national_id_input:
                # ุนูููุฉ ุงูุจุญุซ
                # ุจูุญูู ุงููุฏุฎูุงุช ููุตูุต ุนุดุงู ูุชุฌูุจ ูุดุงูู ุงูุฃุฑูุงู
                df['National_ID'] = df['National_ID'].astype(str)
                student_result = df[df['National_ID'] == national_id_input]

                if not student_result.empty:
                    st.success(f"โ ุชู ุงูุนุซูุฑ ุนูู ุงููุชูุฌุฉ ููุทุงูุจ: {student_result.iloc[0]['Name']}")
                    # ุนุฑุถ ุงููุชูุฌุฉ ูู ุฌุฏูู ุดูู
                    st.table(student_result)
                else:
                    st.error("โ ุงูุฑูู ุงููููู ุบูุฑ ุตุญูุญ ุฃู ุบูุฑ ูุณุฌู ูู ุงููุดูู.")
            else:
                st.warning("ุงูุฑุฌุงุก ูุชุงุจุฉ ุงูุฑูู ุงููููู ุฃููุงู.")
                
    except Exception as e:
        st.error(f"ุญุฏุซ ุฎุทุฃ ูู ูุฑุงุกุฉ ุงูููู: {e}")

else:
    st.info("ุงูุฑุฌุงุก ุฑูุน ููู ุงููุชูุฌุฉ ูุจุฏุก ุงูุนูู (ูุฐู ุงูุฑุณุงูุฉ ุชุธูุฑ ูููุฏูุฑ ููุท).")
